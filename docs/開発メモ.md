# ClipBox 開発メモ

作成日: 2026年1月1日

---

## 開発環境セットアップ

### 1. 仮想環境の作成と有効化

```bash
# 仮想環境の作成
python -m venv venv

# 仮想環境の有効化（Windows）
venv\Scripts\activate

# 仮想環境の有効化（Mac/Linux）
source venv/bin/activate
```

### 2. 依存パッケージのインストール

```bash
pip install -r requirements.txt
```

### 3. 設定ファイルの修正

`config.py` の `SCAN_DIRECTORIES` を実際の環境に合わせて修正してください。

```python
SCAN_DIRECTORIES = [
    Path("C:/Users/YourName/Videos"),  # 実際のパスに変更
    # Path("E:/Videos"),  # 外付けHDD
]
```

---

## 初回起動手順

### 1. データベースの初期化

Pythonインタラクティブシェルまたはスクリプトで実行：

```python
from core.database import init_database
init_database()
```

### 2. Streamlitアプリの起動

```bash
streamlit run streamlit_app.py
```

ブラウザで `http://localhost:8501` にアクセス

---

## 開発タスク

### フェーズ1: 基本機能実装

- [ ] データベース初期化機能の実装
- [ ] ファイルスキャン機能の実装
- [ ] フィルタ機能の実装
- [ ] 動画一覧表示の実装
- [ ] ランダム再生機能の実装
- [ ] 視聴履歴記録機能の実装
- [ ] 基本統計表示の実装

### フェーズ2: 機能拡張（検討中）

- [ ] Flask/FastAPIへの移行
- [ ] 気分トラッキング機能
- [ ] 統計ダッシュボード
- [ ] サムネイル表示
- [ ] プレイリスト機能

---

## テスト実行

```bash
# 全テスト実行
pytest

# カバレッジ付きテスト
pytest --cov=core --cov-report=html
```

---

## トラブルシューティング

### データベースが見つからない場合

`data/videos.db` が存在しない場合は、データベース初期化を実行してください。

### ファイルが再生できない場合

- ファイルパスが正しいか確認
- 外付けHDDが接続されているか確認
- デフォルトのメディアプレイヤーが設定されているか確認

---

## 開発メモ

### 2026年1月1日

- プロジェクト構造を作成
- 基本的なモジュールの骨組みを実装
- 次のステップ: Streamlit UIの実装とデータベース初期化機能のテスト

---

## 参考資料

- [Streamlit公式ドキュメント](https://docs.streamlit.io/)
- [SQLite公式ドキュメント](https://www.sqlite.org/docs.html)
- [Python標準ライブラリ](https://docs.python.org/ja/3/library/)
